@model CommunityConnections.ViewModels.CustomerActionViewModel

@{
    ViewBag.Title = "Action";
}

@if (Model != null)
{

<form id="actionForm">

    <div class="row">

        <div class="card col-md-6">

            <div class="card-body">
                <h2 class="card-title">

                    @if (Model.ID != 0)
                    {
                        <span>Edit Customer Information</span>
                    }
                    else
                    {
                        <span>Save Customer Information</span>
                    }
                </h2>
                <hr />

                <div class="col-md-12">
                    <input type="hidden" id="ID" name="ID" value="@Model.ID" />

                    <div class="form-row col-md-12">
                        <div class="form-group col-md-12">

                            @Html.LabelFor(model => model.Compnay, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.Compnay, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Compnay, "", new { @class = "text-danger" })



                        </div>


                    </div>

                    <div class="form-row col-md-12">



                        <div class="form-group col-md-3">
                            @Html.LabelFor(model => model.Title, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.Title, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger" })

                        </div>


                        <div class="form-group col-md-3">
                            @Html.LabelFor(model => model.FirstName, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.FirstName, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.FirstName, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group col-md-3">
                            @Html.LabelFor(model => model.MiddleName, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.MiddleName, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.MiddleName, "", new { @class = "text-danger" })
                        </div>


                        <div class="form-group col-md-3">
                            @Html.LabelFor(model => model.LastName, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.LastName, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.LastName, "", new { @class = "text-danger" })
                        </div>


                    </div>




                    <div class="form-row col-md-12">

                        <div class="form-group col-md-6">
                            @Html.LabelFor(model => model.Address, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.Address, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Address, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group col-md-6">
                            @Html.LabelFor(model => model.Country, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.Country, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Country, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-row col-md-12">

                        <div class="form-group col-md-4">
                            @Html.LabelFor(model => model.City, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.City, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.City, "", new { @class = "text-danger" })

                        </div>

                        <div class="form-group col-md-4">
                            @Html.LabelFor(model => model.State, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.State, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.State, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group col-md-4">
                            @Html.LabelFor(model => model.AreaCode, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.AreaCode, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.AreaCode, "", new { @class = "text-danger" })
                        </div>

                    </div>

                    <div class="form-row col-md-12">


                        <div class="form-group col-md-6">
                            @Html.LabelFor(model => model.Phone, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.Phone, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Phone, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group col-md-6">
                            @Html.LabelFor(model => model.OtherPhone, htmlAttributes: new { @class = "control-label col-md-12" })

                            @Html.EditorFor(model => model.OtherPhone, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.OtherPhone, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-row col-md-12">
                        <div class="form-group col-md-6">

                            @Html.LabelFor(model => model.Fax, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.Fax, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Fax, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group col-md-6">
                            @Html.LabelFor(model => model.Email, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.Email, "", new { @class = "text-danger" })
                        </div>

                    </div>
                    <div class="form-row col-md-12">

                        <div class="form-group col-md-6">
                            @Html.LabelFor(model => model.BillingEmail, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.BillingEmail, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.BillingEmail, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group col-md-6">
                            @Html.LabelFor(model => model.CustomerBalance, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.CustomerBalance, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.CustomerBalance, "", new { @class = "text-danger" })
                        </div>


                    </div>

                </div>
                <div class="col-md-12">
                    @if (Model.ID != 0)
                    {
                        <button id="actionButton" type="button" class="btn btn-outline-primary"><i class="fas fa-save mr-1"></i> UPDATE</button>
                    }
                    else
                    {
                        <button id="actionButton" type="button" class="btn btn-outline-primary "><i class="fas fa-save mr-1"></i> SAVE</button>
                    }
                    <a href="@Url.Action("Index","Customer")" class="btn btn-outline-danger"> CANCEL</a>
                </div>

            </div>
        </div>


        <div class="col-md-5">
            <div style="margin-left: 30px;" class="card col-md-12">
                <div class="card-body">

                    <hr />

                    <div class="col-md-12">
                        <div class="form-group col-md-12">
                            @Html.LabelFor(model => model.Notes, htmlAttributes: new { @class = "control-label col-md-12" })
                            <input style="height:200px;" name="Notes" type="text" value="@Model.Notes" class="form-control" />
                            @Html.ValidationMessageFor(model => model.Notes, "", new { @class = "text-danger" })
                        </div>

                        <div class="form-group col-md-12">
                            @Html.LabelFor(model => model.PopupMessage, htmlAttributes: new { @class = "control-label col-md-12" })
                            @Html.EditorFor(model => model.PopupMessage, new { htmlAttributes = new { @class = "form-control" } })
                            @Html.ValidationMessageFor(model => model.PopupMessage, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    
                </div>


               

            </div>


            <br />
            <div style="margin-left:30px;" class="card col-md-12">
                <div class="card-body">
                    <h2 class="card-title">
                        @if (Model.ID != 0)
                        {
                            <span>Edit Custom Pricing</span>
                        }
                        else
                        {
                            <span>Save Custom Pricing</span>
                        }
                    </h2>
                    <hr />

                    <button data-href="@Url.Action("CPAction", "Customer")" class="data-btn btn btn-block btn-outline-success" type="button" data-toggle="modal" data-target="#actionModal"><i class="fas fa-plus mr-1"></i> Add Custom Pricing</button>
                    <div class="col-lg-12 grid-margin stretch-card">
                        @if (Model != null)
                        {
                            if (Model.CustomPricings != null)
                            {
                        <div class="card">

                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>

                                            <th>
                                                AdSize
                                            </th>
                                            <th>
                                                Price
                                            </th>
                                            <th>
                                                Custom Notes
                                            </th>



                                            <th>
                                                Action
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        @foreach (var item in Model.CustomPricings)
                                        {
                                            <tr>
                                                <td>@item.AdSize</td>
                                                <td>@item.Price</td>
                                                <td>@item.CustomNotes</td>

                                                <td>
                                                    <button data-href="@Url.Action("CPAction", "Customer", new { ID = item.ID })" type="button" class="data-btn btn btn-outline-info btn-icon-text" data-toggle="modal" data-target="#actionModal"><i class="mdi mdi-pencil"></i> EDIT</button>
                                                    <button data-href="@Url.Action("CPDelete", "Customer", new { ID = item.ID })" type="button" class="data-btn btn btn-outline-danger btn-icon-text" data-toggle="modal" data-target="#actionModal"><i class="mdi mdi-delete"></i>DELETE</button>


                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                           
                        </div>
                            }
                        }
                        else
                        {
                            <div class="alert alert-warning col-md-12" role="alert">
                                Sorry! No records exist.
                            </div>
                        }
                    </div>
                </div>
            </div>
           
        </div>
        
    </div>
    
</form>
    <br />

    <div class="row">

        <div class="card col-md-6">
            <div class="card-body">
                <h2 class="card-title">
                    Cards
                </h2>
                <button data-href="@Url.Action("CardAction", "Customer")" class="data-btn btn btn-block btn-outline-success" type="button" data-toggle="modal" data-target="#actionModal"><i class="fas fa-plus mr-1"></i> Add Cards</button>

                <hr />

                <div class="col-lg-12 grid-margin stretch-card">
                    @if (Model != null)
                    {
                        if (Model.Cards != null)
                        {
                            <div class="card">

                                <div class="table-responsive">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>

                                                <th>
                                                    Card Name
                                                </th>
                                                <th>
                                                    Card Number
                                                </th>
                                                <th>
                                                    Expiration Date
                                                </th>



                                                <th>
                                                    Action
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.Cards)
                                            {
                                                <tr>
                                                    <td>@item.CardName</td>
                                                    <td class="cardNumber">@item.CardNumber</td>
                                                    <td>@item.ExpirationDate</td>

                                                    <td>
                                                        <button data-href="@Url.Action("CardAction", "Customer", new { ID = item.ID })" type="button" class="data-btn btn btn-outline-info btn-icon-text" data-toggle="modal" data-target="#actionModal"><i class="mdi mdi-pencil"></i> EDIT</button>
                                                        <button data-href="@Url.Action("CardDelete", "Customer", new { ID = item.ID })" type="button" class="data-btn btn btn-outline-danger btn-icon-text" data-toggle="modal" data-target="#actionModal"><i class="mdi mdi-delete"></i>DELETE</button>


                                                    </td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        }
                    }
                    else
                    {
                        <div class="alert alert-warning col-md-12" role="alert">
                            Sorry! No records exist.
                        </div>
                    }
                </div>
            </div>

        </div>

        <div style="margin-left:30px" class="card col-md-5">
            <div class="card-body">
                <h2 class="card-title">
                    Ads
                </h2>
                <a href="@Url.Action("Action","Ads")" class="btn btn-block btn-outline-success">Add Ads</a>
                <div class="col-lg-12 grid-margin stretch-card">
                    @if (Model != null)
                    {
                        if (Model.Ads != null)
                        {
                            <div class="card">

                                <div class="table-responsive">
                                    <table class="table table-striped table-hover">
                                        <thead>
                                            <tr>

                                                <th>
                                                    Name
                                                </th>
                                                <th>
                                                    Book
                                                </th>
                                                <th>
                                                    Status
                                                </th>
                                                <th>
                                                    Total
                                                </th>




                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.Ads)
                                            {
                                                <tr>
                                                    <td>@item.Name</td>
                                                    <td>@item.Book</td>
                                                    <td>@item.Status</td>
                                                    <td>@item.Total</td>
                                                </tr>
                                            }
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        }
                    }
                    else
                    {
                        <div class="alert alert-warning col-md-12" role="alert">
                            Sorry! No records exist.
                        </div>
                    }
                </div>
            </div>

        </div>
    </div>






    <div class="modal fade" id="actionModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
        </div>
    </div>




    <div class="errorDiv">

    </div>

}




<script>
     $("#actionButton").click(function () {
		$.ajax({
			url: '@Url.Action("Action", "Customer")',
			type: "post",
			data: $("#actionForm").serialize()
		})
		.done(function () {

            window.location.href = "@Url.Action("Index","Customer")";

		});
     });


    //$(document).ready(function () {
    //    var ssn = document.getElementsByClassName('cardNumber');
    //    document.getElementsByClassName('cardNumber').value = "*****" + ssn.substr(ssn.length - 4);

    //});


    $(".data-btn").click(function () {
        $.ajax({
            url: $(this).attr("data-href"),
        })
            .done(function (response) {
                $("#actionModal .modal-dialog").html(response);
            });
    });
</script>

